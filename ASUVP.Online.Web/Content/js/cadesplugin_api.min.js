(function(){function o(t,i){if(typeof console!="undefined"&&t<=n.current_log_level){t==n.LOG_LEVEL_DEBUG&&console.log("DEBUG: %s",i);t==n.LOG_LEVEL_INFO&&console.info("INFO: %s",i);t==n.LOG_LEVEL_ERROR&&console.error("ERROR: %s",i);return}}function tt(t){if(!(t==n.LOG_LEVEL_DEBUG||t==n.LOG_LEVEL_INFO||t==n.LOG_LEVEL_ERROR)){o(n.LOG_LEVEL_ERROR,"cadesplugin_api.js: Incorrect log_level: "+t);return}n.current_log_level=t;n.current_log_level==n.LOG_LEVEL_DEBUG&&o(n.LOG_LEVEL_INFO,"cadesplugin_api.js: log_level = DEBUG");n.current_log_level==n.LOG_LEVEL_INFO&&o(n.LOG_LEVEL_INFO,"cadesplugin_api.js: log_level = INFO");n.current_log_level==n.LOG_LEVEL_ERROR&&o(n.LOG_LEVEL_INFO,"cadesplugin_api.js: log_level = ERROR");i()&&(n.current_log_level==n.LOG_LEVEL_DEBUG&&window.postMessage("set_log_level=debug","*"),n.current_log_level==n.LOG_LEVEL_INFO&&window.postMessage("set_log_level=info","*"),n.current_log_level==n.LOG_LEVEL_ERROR&&window.postMessage("set_log_level=error","*"))}function it(){n.CAPICOM_LOCAL_MACHINE_STORE=1;n.CAPICOM_CURRENT_USER_STORE=2;n.CADESCOM_LOCAL_MACHINE_STORE=1;n.CADESCOM_CURRENT_USER_STORE=2;n.CADESCOM_CONTAINER_STORE=100;n.CAPICOM_MY_STORE="My";n.CAPICOM_STORE_OPEN_MAXIMUM_ALLOWED=2;n.CAPICOM_CERTIFICATE_FIND_SUBJECT_NAME=1;n.CADESCOM_XML_SIGNATURE_TYPE_ENVELOPED=0;n.CADESCOM_XML_SIGNATURE_TYPE_ENVELOPING=1;n.CADESCOM_XML_SIGNATURE_TYPE_TEMPLATE=2;n.XmlDsigGost3410UrlObsolete="http://www.w3.org/2001/04/xmldsig-more#gostr34102001-gostr3411";n.XmlDsigGost3411UrlObsolete="http://www.w3.org/2001/04/xmldsig-more#gostr3411";n.XmlDsigGost3410Url="urn:ietf:params:xml:ns:cpxmlsec:algorithms:gostr34102001-gostr3411";n.XmlDsigGost3411Url="urn:ietf:params:xml:ns:cpxmlsec:algorithms:gostr3411";n.CADESCOM_CADES_DEFAULT=0;n.CADESCOM_CADES_BES=1;n.CADESCOM_CADES_T=5;n.CADESCOM_CADES_X_LONG_TYPE_1=93;n.CADESCOM_ENCODE_BASE64=0;n.CADESCOM_ENCODE_BINARY=1;n.CADESCOM_ENCODE_ANY=-1;n.CAPICOM_CERTIFICATE_INCLUDE_CHAIN_EXCEPT_ROOT=0;n.CAPICOM_CERTIFICATE_INCLUDE_WHOLE_CHAIN=1;n.CAPICOM_CERTIFICATE_INCLUDE_END_ENTITY_ONLY=2;n.CAPICOM_CERT_INFO_SUBJECT_SIMPLE_NAME=0;n.CAPICOM_CERT_INFO_ISSUER_SIMPLE_NAME=1;n.CAPICOM_CERTIFICATE_FIND_SHA1_HASH=0;n.CAPICOM_CERTIFICATE_FIND_SUBJECT_NAME=1;n.CAPICOM_CERTIFICATE_FIND_ISSUER_NAME=2;n.CAPICOM_CERTIFICATE_FIND_ROOT_NAME=3;n.CAPICOM_CERTIFICATE_FIND_TEMPLATE_NAME=4;n.CAPICOM_CERTIFICATE_FIND_EXTENSION=5;n.CAPICOM_CERTIFICATE_FIND_EXTENDED_PROPERTY=6;n.CAPICOM_CERTIFICATE_FIND_APPLICATION_POLICY=7;n.CAPICOM_CERTIFICATE_FIND_CERTIFICATE_POLICY=8;n.CAPICOM_CERTIFICATE_FIND_TIME_VALID=9;n.CAPICOM_CERTIFICATE_FIND_TIME_NOT_YET_VALID=10;n.CAPICOM_CERTIFICATE_FIND_TIME_EXPIRED=11;n.CAPICOM_CERTIFICATE_FIND_KEY_USAGE=12;n.CAPICOM_DIGITAL_SIGNATURE_KEY_USAGE=128;n.CAPICOM_PROPID_ENHKEY_USAGE=9;n.CAPICOM_OID_OTHER=0;n.CAPICOM_OID_KEY_USAGE_EXTENSION=10;n.CAPICOM_EKU_CLIENT_AUTH=2;n.CAPICOM_EKU_SMARTCARD_LOGON=5;n.CAPICOM_EKU_OTHER=0;n.CAPICOM_AUTHENTICATED_ATTRIBUTE_SIGNING_TIME=0;n.CADESCOM_AUTHENTICATED_ATTRIBUTE_DOCUMENT_NAME=1;n.CADESCOM_AUTHENTICATED_ATTRIBUTE_DOCUMENT_DESCRIPTION=2;n.CADESCOM_ATTRIBUTE_OTHER=-1;n.CADESCOM_STRING_TO_UCS2LE=0;n.CADESCOM_BASE64_TO_BINARY=1;n.CADESCOM_DISPLAY_DATA_NONE=0;n.CADESCOM_DISPLAY_DATA_CONTENT=1;n.CADESCOM_DISPLAY_DATA_ATTRIBUTE=2;n.CADESCOM_ENCRYPTION_ALGORITHM_RC2=0;n.CADESCOM_ENCRYPTION_ALGORITHM_RC4=1;n.CADESCOM_ENCRYPTION_ALGORITHM_DES=2;n.CADESCOM_ENCRYPTION_ALGORITHM_3DES=3;n.CADESCOM_ENCRYPTION_ALGORITHM_AES=4;n.CADESCOM_ENCRYPTION_ALGORITHM_GOST_28147_89=25;n.CADESCOM_HASH_ALGORITHM_SHA1=0;n.CADESCOM_HASH_ALGORITHM_MD2=1;n.CADESCOM_HASH_ALGORITHM_MD4=2;n.CADESCOM_HASH_ALGORITHM_MD5=3;n.CADESCOM_HASH_ALGORITHM_SHA_256=4;n.CADESCOM_HASH_ALGORITHM_SHA_384=5;n.CADESCOM_HASH_ALGORITHM_SHA_512=6;n.CADESCOM_HASH_ALGORITHM_CP_GOST_3411=100;n.CADESCOM_HASH_ALGORITHM_CP_GOST_3411_2012_256=101;n.CADESCOM_HASH_ALGORITHM_CP_GOST_3411_2012_512=102;n.LOG_LEVEL_DEBUG=4;n.LOG_LEVEL_INFO=2;n.LOG_LEVEL_ERROR=1}function rt(n){function t(n,t){var f;try{f=r[n](t)}catch(e){return Promise.reject(e)}return f.done?f.value:Promise.resolve(f.value).then(i,u)}var r=n(Array.prototype.slice.call(arguments,1)),i=t.bind(t,"next"),u=t.bind(t,"throw");return i()}function c(){return"Microsoft Internet Explorer"==navigator.appName||navigator.userAgent.match(/Trident\/./i)}function v(){return navigator.userAgent.match(/ipod/i)||navigator.userAgent.match(/ipad/i)||navigator.userAgent.match(/iphone/i)}function i(){var n=navigator.userAgent.match(/chrome/i),t=navigator.userAgent.match(/chromeframe/i);return(h=navigator.userAgent.match(/opr/i),nt=navigator.userAgent.match(/YaBrowser/i),n==null)?!1:n.length>0||h!=null?!0:!1}function y(n){var t,i;if(v())return ot("CreateObject",[n]);if(c()){if(n.match(/X509Enrollment/i))try{return t=document.getElementById("certEnrollClassFactory"),t.CreateObject(n)}catch(u){throw"Для создания обьектов X509Enrollment следует настроить веб-узел на использование проверки подлинности по протоколу HTTPS";}try{return i=document.getElementById("webClassFactory"),i.CreateObject(n)}catch(u){return new ActiveXObject(n)}}return r.CreateObject(n)}function ut(n){return n<0&&(n=4294967295+n+1),n.toString(16).toUpperCase()}function p(n){var t=n.message;return t?n.number&&(t+=" (0x"+ut(n.number)+")"):t=n,t}function ft(n){if(i()||c()||v())return p(n);try{return r.getLastError()}catch(t){return p(n)}}function et(n){return r.CreateObjectAsync(n)}function ot(n,t){var i,r;if(f.call(n,t,function(n,t){r=n;var u="tmpobj="+t;eval(u);typeof i=="string"&&(i=i.replace(/\\\n/gm,"\n"),i=i.replace(/\\\r/gm,"\r"))}),r)throw r;return i}function st(){window.cadesplugin_skip_extension_install?t("Плагин недоступен"):document.addEventListener("DOMContentLoaded",function(){var n=document.createElement("div"),i;n.id="cadesplugin_ovr";n.style="visibility: hidden; position: fixed; left: 0px; top: 0px; width:100%; height:100%; background-color: rgba(0,0,0,0.7)";n.innerHTML="<div id='cadesplugin_ovr_item' style='position:relative; width:400px; margin:100px auto; background-color:#fff; border:2px solid #000; padding:10px; text-align:center; opacity: 1; z-index: 1500'><button id='cadesplugin_close_install' style='float: right; font-size: 10px; background: transparent; border: 1; margin: -5px'>X<\/button><p>Для работы КриптоПро ЭЦП Browser plugin на данном сайте необходимо установить расширение из каталога дополнений Opera.<p><button id='cadesplugin_install' style='font:12px Arial'>Установить расширение<\/button><\/p><\/div>";document.getElementsByTagName("Body")[0].appendChild(n);i=document.getElementById("cadesplugin_install");i.addEventListener("click",function(){opr.addons.installExtension("epebfcehmdedogndhlcacafjaacknbcm",function(){document.getElementById("cadesplugin_ovr").style.visibility="hidden";location.reload()},function(){})});document.getElementById("cadesplugin_close_install").addEventListener("click",function(){t("Плагин недоступен");document.getElementById("cadesplugin_ovr").style.visibility="hidden"});n.addEventListener("click",function(){t("Плагин недоступен");document.getElementById("cadesplugin_ovr").style.visibility="hidden"});n.style.visibility="visible";document.getElementById("cadesplugin_ovr_item").addEventListener("click",function(n){n.stopPropagation()})})}function w(){window.postMessage("cadesplugin_echo_request","*");window.addEventListener("message",function(n){n.data=="cadesplugin_loaded"&&cpcsp_chrome_nmcades.check_chrome_plugin(k,t)},!1)}function ht(){var n=document.createElement("script");n.setAttribute("type","text/javascript");n.setAttribute("src","chrome-extension://iifchhfnnmpdbibifmljnfjhpififfog/nmcades_plugin_api.js");n.onerror=t;n.onload=w;document.getElementsByTagName("head")[0].appendChild(n);n=document.createElement("script");n.setAttribute("type","text/javascript");n.setAttribute("src","chrome-extension://epebfcehmdedogndhlcacafjaacknbcm/nmcades_plugin_api.js");n.onerror=t;n.onload=w;document.getElementsByTagName("head")[0].appendChild(n)}function b(){var i=document.createElement("object"),n,t;i.setAttribute("id","cadesplugin_object");i.setAttribute("type","application/x-cades");i.setAttribute("style","visibility: hidden");document.getElementsByTagName("body")[0].appendChild(i);r=document.getElementById("cadesplugin_object");c()&&(n=document.createElement("object"),n.setAttribute("id","certEnrollClassFactory"),n.setAttribute("classid","clsid:884e2049-217d-11da-b2a4-000e7bbb2b09"),n.setAttribute("style","visibility: hidden"),document.getElementsByTagName("body")[0].appendChild(n),t=document.createElement("object"),t.setAttribute("id","webClassFactory"),t.setAttribute("classid","clsid:B04C8637-10BD-484E-B0DA-B8A039F60024"),t.setAttribute("style","visibility: hidden"),document.getElementsByTagName("body")[0].appendChild(t))}function k(){e=1;u?l():window.postMessage("cadesplugin_loaded","*")}function t(n){if(i()){if(a++,a<2)return;if(h&&(typeof n=="undefined"||typeof n=="object")){st();return}}(typeof n=="undefined"||typeof n=="object")&&(n="Плагин недоступен");e=1;u?s(n):window.postMessage("cadesplugin_load_error","*")}function d(){e!=1&&(e=1,u?s("Истекло время ожидания загрузки плагина"):window.postMessage("cadesplugin_load_error","*"))}function g(){var r,n,i;try{r=y("CAdESCOM.About");k()}catch(u){document.getElementById("cadesplugin_object").style.display="none";n=navigator.mimeTypes["application/x-cades"];n?(i=n.enabledPlugin,i?t("Плагин загружен, но не создаются обьекты"):t("Ошибка при загрузке плагина")):t("Плагин недоступен")}}function ct(){var n=document.createElement("div"),r;if(n.innerHTML="<!--[if lt IE 9]><iecheck><\/iecheck><![endif]-->",r=n.getElementsByTagName("iecheck").length==1,r){t("Internet Explorer версии 8 и ниже не поддерживается");return}i()?ht():u?window.addEventListener("load",function(){b();g()},!1):window.addEventListener("message",function(n){n.data=="cadesplugin_echo_request"&&(b(),g())},!1)}function lt(n){r=n}var f;if(!window.cadesplugin){var r,e=0,s,l,h=0,nt=0,a=0,u=!!window.Promise,n;n=u?new Promise(function(n,t){l=n;s=t}):{};f={callbacksCount:1,callbacks:{},resultForCallback:function(n,t){var i=f.callbacks[n];i&&i.apply(null,t)},call:function(n,t,i){var u=i&&typeof i=="function",e=u?f.callbacksCount++:0,r,o;u&&(f.callbacks[e]=i);r=document.createElement("IFRAME");o=["_CPNP_handle"];try{r.setAttribute("src","cpnp-js-call:"+n+":"+e+":"+encodeURIComponent(JSON.stringify(t,o)))}catch(s){alert(s)}document.documentElement.appendChild(r);r.parentNode.removeChild(r);r=null}};n.JSModuleVersion="2.0.3";n.async_spawn=rt;n.set=lt;n.set_log_level=tt;n.getLastError=ft;i()&&(n.CreateObjectAsync=et);i()||(n.CreateObject=y);window.cadesplugin_load_timeout?setTimeout(d,window.cadesplugin_load_timeout):setTimeout(d,2e4);it();n.current_log_level=n.LOG_LEVEL_ERROR;window.cadesplugin=n;ct()}})();